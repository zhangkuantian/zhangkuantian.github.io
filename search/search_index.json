{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u4e3b\u9875","text":""},{"location":"#_2","title":"\u5173\u4e8e\u6211","text":""},{"location":"#hust","title":"\u6bd5\u4e1a\u9662\u6821: HUST","text":""},{"location":"#data-eng","title":"\u5de5\u4f5c\u65b9\u5411: Data-Eng","text":""},{"location":"#data-infradata-for-aiai-for-data","title":"\u5174\u8da3\u65b9\u5411: Data Infra\u3001Data for AI\u3001AI for Data","text":""},{"location":"tags/","title":"\u6807\u7b7e","text":"<p>{{ tag_content }}</p>"},{"location":"toc/","title":"\u76ee\u5f55","text":"<p>{{ blog_content }}</p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/","title":"Unity Catalog \u8c03\u7814","text":""},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#_1","title":"\u80cc\u666f","text":"<p>\u6570\u636e\u6e56\u91cc\u7684\u6570\u636e\u548c\u8868\u8d8a\u6765\u8d8a\u591a\uff0c\u5305\u62ec\u8bad\u7ec3\u91cc\u7684\u6a21\u578b\u4e5f\u8d8a\u6765\u8d8a\u591a\uff0c\u5982\u4f55\u5c06\u6a21\u578b\u548c\u8868\u7ba1\u7406\u8d77\u6765\uff0c\u53d8\u5f97\u66f4\u52a0\u9ebb\u70e6\uff0c\u9700\u8981\u4e00\u4e2a\u7edf\u4e00\u7684\u5e73\u53f0\u8fdb\u884c\u7ba1\u7406\u3002\u76ee\u524d\u4e1a\u754c\u5546\u7528SaaS\u5e73\u53f0\u91cc Databricks \u7684 Unity Catalog \u505a\u5f97\u6bd4\u8f83\u597d\uff0c\u5f00\u6e90\u7684 DataHub \u4e5f\u662f\u505a\u7edf\u4e00Catalog \u7684</p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#unity-catalog","title":"\u4ec0\u4e48\u662f Unity Catalog?","text":"<p>Unity Catalog \u662f\u4e00\u4e2a\u7edf\u4e00\u7684\u5927\u6570\u636e + AI \u8d44\u4ea7\u6cbb\u7406\u89e3\u51b3\u65b9\u6848\uff0c\u63d0\u4f9b\u8de8 workspace \u7684\u6743\u9650\u7ba1\u63a7\u3001\u5ba1\u8ba1\u3001\u6570\u636e\u8840\u7f18\u53ca\u6570\u636e\u53d1\u73b0\u529f\u80fd\u3002</p> <p>\u5927\u81f4\u7ed3\u6784\u5982\u4e0b\u56fe:</p> <p></p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#_2","title":"\u529f\u80fd","text":"<ul> <li>Define once, secure everywhere\uff1a\u7edf\u4e00\u7684 ACL \u7ba1\u63a7\uff0c\u53ea\u9700\u8981\u5728\u4e00\u5904\u5b9a\u4e49 ACL Policy \u5c31\u53ef\u4ee5\u5728\u6240\u6709\u7684 workspace \u4e2d\u4f7f\u7528\u4e86</li> <li>Standards-compliant security model\uff1a\u6807\u51c6\u7684 ANSI SQL \u5b89\u5168\u6a21\u578b\uff0c\u7ba1\u7406\u5458\u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u7684 SQL \u8bed\u6cd5\u4e3a Catalog\u3001Schema\u3001Table \u548c View \u6267\u884c\u6743\u9650\u64cd\u4f5c</li> <li>Built-in auditing and lineage\uff1a\u81ea\u52a8\u91c7\u96c6user\u7ea7\u522b\u7684\u5ba1\u8ba1\u65e5\u5fd7\uff0c\u81ea\u52a8\u91c7\u96c6\u6570\u636e\u8840\u7f18</li> <li>Data discovery\uff1a\u5141\u8bb8\u7528\u6237\u7ed9\u6570\u636e\u96c6\u6253\u6807\u7b7e\u548c\u6dfb\u52a0\u63cf\u8ff0\u4fe1\u606f\uff0c\u63d0\u4f9b\u641c\u7d22\u754c\u9762\u5e2e\u52a9\u6570\u636e\u6d88\u8d39\u8005\u67e5\u627e\u6570\u636e</li> <li>System tables (Public Preview)\uff1a\u5141\u8bb8\u7528\u6237\u8bbf\u95ee\u548c\u67e5\u8be2\u8d26\u6237\u7684\u64cd\u4f5c\u6570\u636e\uff0c\u5305\u62ec\u5ba1\u8ba1\u65e5\u5fd7\u3001\u8d26\u5355\u6570\u636e\u53ca\u8840\u7f18\u6570\u636e</li> </ul>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#unity-catalog_1","title":"Unity Catalog \u5bf9\u8c61\u6a21\u578b","text":"<p>Unity Catalog \u5bf9\u8c61\u6a21\u578b\u81ea\u9876\u5411\u4e0b\u5206\u522b\u662f: Metastore \u2014\u2014&gt; Catalog \u2014\u2014&gt; Schema \u2014\u2014&gt; Table\u3001View\u3001Volume\u3001Function\u3001Model</p> <p>\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>\u5176\u4e2d Volume \u4e3b\u8981\u662f\u7528\u4e8e\u7ba1\u7406\u975e\u7ed3\u6784\u5316\u6570\u636e\u3001Model \u7528\u4e8e\u7ba1\u7406ML\u6a21\u578b, \u9700\u8981\u5728 MLflow Model Registry \u4e2d\u6ce8\u518c\u624d\u80fd\u91c7\u96c6\u5230\u3002</p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#metastore","title":"Metastore","text":"<p>Unity Catalog \u7684\u9876\u5c42Container\uff0c \u7528\u4e8e\u5b58\u50a8\u5173\u4e8e\u6570\u636e\u8d44\u4ea7 (\u8868\u3001\u89c6\u56fe\u3001\u5377\u3001\u6a21\u578b\u7b49) \u7684\u5143\u6570\u636e\uff0c\u4ee5\u53ca\u7ba1\u7406\u5bf9\u8fd9\u4e9b\u6570\u636e\u8d44\u4ea7\u8bbf\u95ee\u6743\u9650\u7684\u6743\u9650\u4fe1\u606f\u3002</p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#catalog","title":"Catalog","text":"<p>Unity Catalog \u4e09\u5c42 namespace \u7ed3\u6784\u4e2d\u7684\u7b2c\u4e00\u5c42\uff0c\u7528\u4e8e\u7ec4\u7ec7\u7528\u6237\u6570\u636e\u8d44\u4ea7\uff0c\u7528\u6237\u53ef\u4ee5\u67e5\u770b\u6240\u6709\u88ab\u6388\u4e88 <code>UER CATALOG</code> \u6743\u9650\u7684 catalog\u3002</p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#schemas","title":"Schemas","text":"<p>Schema \u662f Unity Catalog \u4e09\u5c42 namespace \u4e2d\u7684\u7b2c\u4e8c\u5c42\uff0c\u7528\u4e8e\u7ec4\u7ec7\u8868\u548c\u89c6\u56fe\u3002\u7528\u6237\u53ef\u4ee5\u67e5\u770b\u5728 schema \u7684\u7236catalog \u4e2d\u62e5\u6709 <code>USE CATALOG</code> \u6743\u9650\uff0c\u5728schema\u4e2d\u7528\u4e8e <code>USE SCHEMA</code> \u6743\u9650\u7684\u6240\u6709schema \u5217\u8868\u3002\u5982\u679c\u7528\u6237\u62e5\u6709\u8868\u548c\u89c6\u56fe\u7684<code>SELECT</code>\u6743\u9650\uff0c\u5c31\u53ef\u4ee5\u8bbf\u95ee\u6216\u8005 list \u8be5 schema \u4e0b\u7684\u8868\u548c\u89c6\u56fe\u3002</p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#volumes","title":"Volumes","text":"<p>volumes \u5904\u4e8e Unity Catalog \u4e09\u5c42 namespace \u4e2d\u7684\u7b2c\u4e09\u5c42\uff0c\u4e0e\u8868\u3001\u89c6\u56fe\u53ca\u5176\u4ed6\u7531 schema \u7ec4\u7ec7\u7684 object \u5c5e\u4e8e\u540c\u7ea7\u5173\u7cfb\u3002volumes \u5305\u542b\u4ee5\u4efb\u610f\u683c\u5f0f\u5b58\u50a8\u7684\u6570\u636e\u76ee\u5f55\u548c\u6587\u4ef6\uff0cvolume \u63d0\u4f9b\u5bf9\u6570\u636e\u7684\u975e\u8868\u683c\u8bbf\u95ee\uff0cvolume \u4e2d\u7684\u6570\u636e\u6587\u4ef6\u4e0d\u80fd\u88ab\u6ce8\u518c\u6210\u4e3a\u8868\u683c\u3002 \u8981\u521b\u5efa volume \uff0c\u7528\u6237\u5fc5\u987b\u5177\u6709 <code>CREATE VOLUME</code> \u548c <code>USE SCHEMA</code> \u6743\u9650\uff0c\u4e14\u5fc5\u987b\u5177\u6709\u5bf9\u5e94 catalog \u7684 <code>USE CATALOG</code> \u6743\u9650\u3002 \u8981\u8bfb\u53d6 volume \u4e2d\u7684\u6587\u4ef6\u548c\u76ee\u5f55\uff0c\u7528\u6237\u5fc5\u987b\u5177\u6709 <code>READ VOLUME</code> \u6743\u9650\uff0c\u4e14\u5177\u6709\u5bf9\u5e94 schema \u548c catalog \u7684 <code>USE SCHEMA</code> \u548c <code>USE CATALOG</code> \u6743\u9650\u3002 \u8981\u6dfb\u52a0 \u3001\u5220\u9664\u3001\u4fee\u6539 volume \u7684\u6587\u4ef6\u6216\u8005\u76ee\u5f55\uff0c\u7528\u6237\u5fc5\u987b\u5177\u6709 <code>WRITE VOLUME</code> \u6743\u9650\uff0c\u4e14\u5fc5\u987b\u5177\u6709\u5bf9\u5e94schema \u548c catalog \u7684 <code>USE SCHEMA</code> \u548c <code>USE CATALOG</code> \u6743\u9650\u3002</p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#tables","title":"Tables","text":"<p>table \u5904\u4e8e Unity Catalog \u4e09\u5c42 namespace \u4e2d\u7684\u7b2c\u4e09\u5c42\uff0c\u7528\u4e8e\u7ba1\u7406\u8868\u683c\u6570\u636e\u3002\u8981\u521b\u5efa\u8868\uff0c\u7528\u6237\u5fc5\u987b\u5177\u6709 CREATE \u6743\u9650\u53ca\u5bf9\u5e94 schema \u548c catalog \u7684 <code>USE SCHEMA</code> \u548c <code>USE CATALOG</code> \u6743\u9650\u3002\u8981\u67e5\u8be2\u8868\uff0c\u7528\u6237\u5fc5\u987b\u5177\u6709 <code>SELECT</code> \u6743\u9650\u53ca\u5bf9\u5e94 schema \u548c catalog \u7684 <code>USE SCHEMA</code> \u548c <code>USE CATALOG</code> \u6743\u9650\u3002\u8981\u4fee\u6539\u6216\u8005\u5220\u9664\u8868\uff0c\u7528\u6237\u5fc5\u987b\u5177\u6709\u76f8\u5e94\u7684 <code>ALTER</code>\u3001<code>DROP</code> \u6743\u9650\u3002table \u8ddf\u666e\u901a\u6570\u636e\u6e56\u4e00\u6837\uff0c\u5206 <code>managed table</code> \u548c <code>external table</code>\u3002</p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#views","title":"Views","text":"<p>view \u662f\u57fa\u4e8e metastore \u4e2d\u7684\u8868\u6216\u8005\u5176\u4ed6 view \u521b\u5efa\u7684\u53ea\u8bfb\u5bf9\u8c61\uff0c\u5904\u4e8e Unity Catalog \u4e2d\u7684\u7b2c\u4e09\u5c42\u3002\u7528\u6237\u53ef\u4ee5\u57fa\u4e8e\u4e0d\u540c\u7684 schema \u548c catalog \u4e2d\u7684\u8868\u6216\u8005\u89c6\u56fe\u6765\u521b\u5efa view\uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa dynamic view \u6765\u5b9e\u73b0\u884c\u7ea7\u6216\u8005\u5217\u7ea7\u6743\u9650\u7ba1\u63a7\u3002</p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#models","title":"Models","text":"<p>model \u5904\u4e8e Unity Catalog \u4e09\u5c42 namespace \u4e2d\u7684\u7b2c\u4e09\u5c42\uff0cunity catalog \u4e2d\u7684 model \u662f\u6307\u5728 MLflow Model Registry \u4e2d\u6ce8\u518c\u7684\u673a\u5668\u5b66\u4e60\u6a21\u578b\uff0c\u8981\u5728 Unity Catalog \u4e2d\u521b\u5efamodel\uff0c\u7528\u6237\u9700\u8981\u5728\u5bf9\u5e94\u7684 schema \u548c catalog \u4e2d\u62e5\u6709 <code>CREATE MODEL</code> \u6743\u9650\uff0c\u540c\u65f6\u8fd8\u9700\u8981\u62e5\u6709\u5bf9\u5e94 schema \u548c catalog \u7684 <code>USE SCHEMA</code> \u548c <code>USE CATALOG</code> \u6743\u9650\u3002</p>"},{"location":"blog/catalog/Unity%20Catalog%20%E8%B0%83%E7%A0%94/#unity-catalog_2","title":"Unity Catalog \u4e0e\u6211\u4eec\u73b0\u6709\u65b9\u6848\u7684\u5173\u8054","text":"<p>Unity Catalog \u7684 metastore \u7c7b\u4f3c\u4e8e HMS\uff0c\u5b58\u50a8\u5143\u6570\u636e\uff0c\u6743\u9650\u7ba1\u63a7\u7c7b\u4f3c Ranger\uff0c\u8840\u7f18\u53ca\u6570\u636e\u53d1\u73b0\u7c7b\u4f3c Datahub\uff0c\u6a21\u578b\u6cbb\u7406\u529f\u80fd\u662f\u96c6\u6210\u4e86MLflow\u7684\u6a21\u578b\u6ce8\u518c\u529f\u80fd\uff0c\u53ef\u4ee5\u8bf4 Unity Catalog \u662f HMS\u3001Ranger\u3001Datahub\u3001MLflow \u7684\u96c6\u5408\u3002</p>"},{"location":"blog/clickhouse/clickhouse%20%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/","title":"ClickHouse \u64cd\u4f5c\u8bb0\u5f55","text":"<ul> <li>2024-10-30</li> </ul>"},{"location":"blog/clickhouse/clickhouse%20%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/#_1","title":"\u95ee\u9898\u539f\u56e0","text":"<p>\u4e1a\u52a1\u6570\u636e\u6fc0\u589e\uff0c\u524d\u671f\u5efa\u8868\u65f6\uff0c\u6ca1\u6709\u8bbe\u7f6e\u5408\u7406\u7684 TTL\uff0c\u5386\u53f2\u6570\u636e\u5168\u7559\u5728 CK \u4e2d\uff0c\u5bfc\u81f4 CK \u78c1\u76d8\u6ee1\u4e86</p>"},{"location":"blog/clickhouse/clickhouse%20%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/#_2","title":"\u5904\u7406\u8bb0\u5f55","text":"<ul> <li>\u67e5\u770b\u78c1\u76d8\u5360\u7528\u7387\u9ad8\u7684\u8868 <pre><code>SELECT \n    name, \n    sum(total_bytes) AS size \nFROM system.tables \nWHERE database = 'data_pipeline' \nGROUP BY name\nORDER BY size \n</code></pre></li> <li>\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u9009\u62e9\u9700\u8981\u8bbe\u7f6e TTL \u7684\u8868\u53ca TTL \u65f6\u957f</li> <li>\u901a\u8fc7 DataX \u5c06\u9700\u8981\u8bbe\u7f6e TTL \u7684\u8868\u5386\u53f2\u6570\u636e\u5907\u4efd\u5230\u6570\u636e\u6e56\u4e2d</li> <li>\u8bbe\u7f6e TTL <pre><code>-- \u5355 column\nALTER TABLE `xxx_db`.`xxx_table` MODIFY TTL toDate(`xxx_column`) + toIntervalDay(7);\n\n-- \u591a column \u4ee5\u9017\u53f7 \u5206\u5272\nALTER TABLE `xxx_db`.`xxx_table` MODIFY TTL toDate(`xxx_column_a`) + toIntervalDay(7), toDate(`xxx_column_b`) + toIntervalDay(7),;\n</code></pre></li> </ul>"},{"location":"blog/cube-js/overview/","title":"Overview","text":"<p>\u751f\u4ea7\u7ea7\u522b\u7684 Cube \u4e00\u822c\u7531\u4ee5\u4e0b\u51e0\u4e2a\u7ec4\u4ef6\u7ec4\u6210:</p> <ul> <li>\u4e00\u4e2a\u6216\u8005\u591a\u4e2a API instance</li> <li>\u4e00\u4e2a Refresh Worker</li> <li>\u4e00\u4e2a Cube Store \u96c6\u7fa4</li> </ul> <p></p> <p>\u6bcf\u4e2a\u7ec4\u4ef6\u7684\u529f\u80fd:</p> <ul> <li>API Instances: \u5904\u7406 API \u8bf7\u6c42\uff0c\u7136\u540e\u5c06\u6570\u636e\u4ece Cube Store \u7684\u9884\u6c47\u603b\u6216\u8005\u4ece\u539f\u59cb DB\u4e2d\u67e5\u8be2\u51fa\u6765</li> <li>Refresh Worker: \u5728\u540e\u53f0\u6784\u5efa\u6216\u8005\u66f4\u65b0\u9884\u6c47\u603b\u6570\u636e</li> <li>Cube Store: \u5b58\u50a8 Refresh Worker \u9884\u6c47\u603b\u7684\u6570\u636e\uff0c\u5e76\u5904\u7406 API Instance \u67e5\u8be2\u8bf7\u6c42\u7684\u6570\u636e</li> </ul> <p>Cube Store \u67b6\u6784Cube Store \u662f\u4e13\u4e3a\u5b58\u50a8 Cube \u9884\u805a\u5408\u800c\u8bbe\u8ba1\u7684\uff0cCube Store \u4f7f\u7528\u7684\u662f\u5206\u5e03\u5f0f\u67e5\u8be2\u5f15\u64ce\u67b6\u6784\uff0c\u6bcf\u4e2a Cube Store \u96c6\u7fa4\u90fd\u662f\u7531\u4ee5\u4e0b\u90e8\u5206\u7ec4\u6210:</p> <ul> <li>\u4e00\u4e2a\u6216\u8005\u591a\u4e2a router \u8282\u70b9\uff0c\u5904\u7406 connection \u8fde\u63a5\u3001\u7ba1\u7406\u5143\u6570\u636e\u3001\u6784\u5efa\u67e5\u8be2\u4f18\u5316\u53ca\u534f\u8c03\u4ed6\u4eec\u7684\u6267\u884c</li> <li>\u591a\u4e2a worker \u8282\u70b9\uff0c\u7528\u4e8e\u5206\u5e03\u5f0f\u9884\u70ed\u6570\u636e\u3001\u6267\u884c\u67e5\u8be2</li> <li>\u672c\u5730\u6216\u57fa\u4e8e\u4e91\u7684Blob\u5b58\u50a8\u4ee5\u5217\u5b58\u50a8\u7684\u683c\u5f0f\u6765\u4fdd\u5b58\u9884\u805a\u5408\u7684\u6570\u636e</li> </ul> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b, Cube Store \u76d1\u542c 3030 \u7aef\u53e3\u6765\u83b7\u53d6 Cube \u7684\u67e5\u8be2\u8bf7\u6c42\u3002\u8fd9\u4e2a\u7aef\u53e3\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u73af\u5883\u53d8\u91cf CUBESTORE_HTTP_PORT \u6765\u4fee\u6539\u8fd9\u4e2a\u7aef\u53e3\uff0c\u4e3a\u4e86\u4f7f\u7528\u81ea\u5b9a\u4e49\u7aef\u53e3\uff0c\u8bf7\u786e\u4fdd\u5728 Cube API Instance \u548c Refresh Worker \u4e2d\u540c\u65f6\u4fee\u6539 CUBEJS_CUBESTORE_PORT \u53d8\u91cf\u3002router \u548c worker \u4f7f\u7528\u76f8\u540c\u7684 image\uff0c\u8981\u7ba1\u7406\u8fd9\u4e24\u4e2a\u89d2\u8272\uff0c\u9700\u8981\u4fee\u6539\u5982\u4e0b\u53d8\u91cf:</p> \u73af\u5883\u53d8\u91cf Router Worker CUBESTORE_SERVER_NAME Yes Yes CUBESTORE_META_PORT Yes - CUBESTORE_WORKERS Yes Yes CUBESTORE_WORKER_PORT - Yes CUBESTORE_META_ADDR - Yes <p>Cube Store Router\u8d1f\u8d23\u63a5\u6536\u6765\u81ea Cube \u7684\u67e5\u8be2\u3001\u7ba1\u7406CubeStore \u96c6\u7fa4\u7684\u5143\u6570\u636e\u53ca\u4f18\u5316\u548c\u5206\u53d1 Workers \u7684\u8bf7\u6c42\uff0c\u540c\u65f6\u63d0\u4f9b\u517c\u5bb9 MySQL \u534f\u8bae\u7684\u63a5\u53e3\u6765\u76f4\u63a5\u67e5\u8be2 CubeStore \u4e2d\u9884\u6c47\u603b\u7684\u7ed3\u679c\u3002Cube \u53ea\u4f1a\u4e0e Router \u901a\u4fe1\uff0c\u4e0d\u4f1a\u76f4\u63a5\u4e0e Worker \u901a\u4fe1\u3002</p> <p>Cube Store WorkerCube Store \u96c6\u7fa4\u4e2d\u7684 Worker \u8d1f\u8d23\u63a5\u6536\u548c\u6267\u884c\u6765\u81ea Router \u4e2d\u7684\u67e5\u8be2\uff0c\u5e76\u76f4\u63a5\u4e0e\u5e95\u5c42\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u4ea4\u4e92\uff0c\u6267\u884c\u63d2\u5165\u3001\u67e5\u8be2\u548c\u9884\u6c47\u603b\u9884\u70ed\u3002Worker \u4e4b\u95f4\u4e0d\u4f1a\u76f4\u63a5\u4ea4\u4e92\uff0c\u800c\u662f\u901a\u8fc7 Router \u6765\u5206\u53d1\u67e5\u8be2\u548c\u7ba1\u7406\u76f8\u5173\u7684\u5143\u6570\u636e\u3002</p> <p>Scaling \u80fd\u529b\u867d\u7136 Cube Store \u53ef\u4ee5\u4ee5\u5355\u5b9e\u4f8b\u6a21\u5f0f\u8fd0\u884c\uff0c\u4f46\u662f\u8fd9\u79cd\u6a21\u5f0f\u4e0d\u9002\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u3002\u5bf9\u4e8e\u9ad8\u5e76\u53d1\u3001\u9ad8\u541e\u5410\u800c\u8a00\uff0c\u5efa\u8bae\u5c06 Cube Store \u8fd0\u884c\u5728\u591a\u5b9e\u4f8b\u7684\u96c6\u7fa4\u4e0a\u3002\u5f97\u76ca\u4e8e\u5b58\u50a8\u4e0e\u67e5\u8be2\u5f15\u64ce\u5df2\u7ecf\u5206\u79bb(\u5b58\u7b97\u5206\u79bb)\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u5e76\u53d1\u53ca\u541e\u5410\u91cf\u9700\u6c42\u6c34\u5e73\u6269\u5c55 Cube Store \u96c6\u7fa4\u3002</p> <p>\u5b58\u50a8Cube Store \u4f7f\u7528\u5355\u72ec\u7684\u5b58\u50a8\u5c42\u6765\u5206\u522b\u5b58\u50a8\u5143\u6570\u636e\u548c\u9884\u805a\u5408\u7684 parquet \u6570\u636e\u6587\u4ef6\uff0cCube Store \u53ef\u4ee5\u4f7f\u7528 AWS S3 \u548c GCS\uff0c\u5982\u679c\u96c6\u7fa4\u7684\u6240\u6709\u8282\u70b9\u90fd\u5728\u4e00\u4e2a\u673a\u5668\u4e0a\u7684\u8bdd\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u672c\u5730\u8def\u5f84\uff08\u98ce\u9669\u70b9: \u76ee\u524d\u6211\u4eec\u4f7f\u7528\u7684\u662f oss\uff0cCubeStore \u662f\u7528 rust \u5199\u7684\uff0c\u622a\u6b62\u5230 2024-01-26\uff0c\u963f\u91cc\u4e91\u5c1a\u672a\u63d0\u4f9b oss \u7684 rust sdk\uff0cCubeStore \u76ee\u524d\u4e5f\u8fd8\u6ca1\u652f\u6301 oss\uff0c\u9700\u8981\u540c\u65f6\u81ea\u5df1\u5b9e\u73b0 oss rust sdk \u548c CubeStore \u7684 oss \u5b58\u50a8\u6a21\u5757\uff09\u65b0\u7248\u672c\u7684 CubeStore \u652f\u6301 MinIO\uff0c\u4f46\u662fMinIO \u7684\u5f00\u6e90\u534f\u8bae\u662f GUN AGPL3\uff0c\u5546\u4e1a\u516c\u53f8\u4f7f\u7528\u6709\u98ce\u9669\uff0c\u6211\u4eec\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\uff0c\u907f\u514d\u5e26\u6765\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6\u3002</p>"},{"location":"blog/dqc/dqc_design/","title":"Dqc design","text":""},{"location":"blog/dqc/dqc_design/#_1","title":"\u4ea7\u54c1\u6982\u8ff0","text":"<p>\u5f53\u524d\u6211\u4eec\u540e\u53f0\u5df2\u7ecf\u5b9e\u73b0\u4e86\u6570\u636e\u8d28\u91cf\u6821\u9a8c\u7684\u529f\u80fd\uff0c\u4f46\u662f\u7f3a\u4e4f\u524d\u7aef\u4ea4\u4e92\u529f\u80fd\uff0c\u7528\u6237\u6ca1\u6cd5\u5feb\u901f\u4e0a\u624b\uff0c\u9700\u8981\u5f00\u53d1\u524d\u7aef\u9875\u9762\uff0c\u8ba9\u7528\u6237\u76f4\u63a5\u70b9\u70b9\u70b9\u5c31\u80fd\u5b9e\u73b0\u6570\u636e\u8d28\u91cf\u4efb\u52a1\u7684\u914d\u7f6e\u3001\u4efb\u52a1\u72b6\u6001\u53ca\u7ed3\u679c\u7684\u67e5\u770b\u529f\u80fd\u3002 </p>"},{"location":"blog/dqc/dqc_design/#_2","title":"\u7528\u6237\u7fa4\u4f53","text":"<p>\u5206\u6790\u5e08\u3001\u6570\u636e\u5f00\u53d1\u5de5\u7a0b\u5e08 </p>"},{"location":"blog/dqc/dqc_design/#_3","title":"\u529f\u80fd\u5217\u8868","text":"\u529f\u80fd\u6a21\u5757 \u529f\u80fd\u70b9 \u529f\u80fd\u63cf\u8ff0 \u4f18\u5148\u7ea7 \u9274\u6743\u6a21\u5757 keycloak \u767b\u5f55/API \u9274\u6743 - \u5b9e\u73b0keycloak \u767b\u5f55- \u7528\u6237\u5230\u8868\u3001\u5217\u7ea7\u7684\u6743\u9650\u7ba1\u63a7 P1 \u89c4\u5219\u7ba1\u7406 \u9884\u5b9a\u4e49\u89c4\u5219\u7ba1\u7406 - \u89c4\u5219\u540d\u79f0- \u89c4\u5219\u63cf\u8ff0- \u89c4\u5219\u9002\u7528\u8303\u56f4(\u8868\u7ea7\u3001\u5217\u7ea7)- \u89c4\u5219\u7c7b\u578b(\u552f\u4e00\u6027\u3001\u6570\u503c\u578b(\u5355\u6570\u503c\u578b\u3001\u533a\u95f4\u6570\u503c\u578b)\u3001\u7f3a\u5931\u6027\u3001\u5408\u6cd5\u6027)- \u6743\u91cd\u7ea7\u522b- Owner- \u544a\u8b66\u8ba2\u9605\u5217\u8868 P0 \u81ea\u5b9a\u4e49\u89c4\u5219\u7ba1\u7406(\u5168\u5c40) - \u89c4\u5219\u540d\u79f0- \u89c4\u5219\u63cf\u8ff0- \u9002\u7528\u8303\u56f4- \u89c4\u5219\u7c7b\u578b- \u89c4\u5219\u8ba1\u7b97 SQL/Query Expression- \u6743\u91cd\u7ea7\u522b- Owner- \u544a\u8b66\u8ba2\u9605\u5217\u8868 P0 \u6570\u636e\u8d28\u91cf\u4efb\u52a1\u7ba1\u7406 \u6570\u636e\u96c6\u5c55\u793a - \u51c6\u5b9e\u65f6\u83b7\u53d6DBT \u4efb\u52a1\u4fe1\u606f- \u5c55\u793a\u4efb\u52a1\u4fe1\u606f P0 \u6570\u636e\u8d28\u91cf\u4efb\u52a1\u914d\u7f6e - \u5c55\u793a\u6570\u636e\u96c6\u57fa\u672c\u4fe1\u606f- \u5c55\u793a\u73b0\u6709\u7684\u8868\u7ea7\u6821\u9a8c\u4efb\u52a1\u5217\u8868- \u5c55\u793a\u73b0\u6709\u7684\u5217\u7ea7\u6821\u9a8c\u4efb\u52a1\u5217\u8868- \u6dfb\u52a0\u9884\u5b9a\u4e49\u3001\u81ea\u5b9a\u4e49\u7684\u8868\u7ea7\u6821\u9a8c\u4efb\u52a1- \u6dfb\u52a0\u9884\u5b9a\u4e49\u3001\u81ea\u5b9a\u4e49\u7684\u5217\u7ea7\u522b\u6821\u9a8c\u4efb\u52a1- \u5220\u9664\u8868\u7ea7\u3001\u5217\u7ea7\u6821\u9a8c\u4efb\u52a1 P0 \u4efb\u52a1\u6267\u884c\u72b6\u6001 - \u4efb\u52a1\u7684\u8fd0\u884c\u72b6\u6001\u5c55\u793a- \u4efb\u52a1\u7684\u544a\u8b66\u72b6\u6001\u5c55\u793a P0"},{"location":"blog/dqc/dqc_design/#_4","title":"\u529f\u80fd\u8be6\u7ec6","text":""},{"location":"blog/dqc/dqc_design/#_5","title":"\u9274\u6743\u6a21\u5757","text":""},{"location":"blog/dqc/dqc_design/#_6","title":"\u7528\u6237\u767b\u5f55","text":""},{"location":"blog/dqc/dqc_design/#api","title":"API \u9274\u6743","text":"<ul> <li>\u65e0\u6743\u9650\u7684\u7528\u6237\uff0c\u4e0d\u80fd\u67e5\u770b\u89c4\u5219\u3001\u4efb\u52a1\u8fd0\u884c\u72b6\u6001\u3001\u4efb\u52a1\u8fd0\u884c\u7ed3\u679c</li> <li>\u7528\u6237\u53ea\u80fd\u67e5\u770b\u8d4b\u4e88\u6743\u9650\u7684\u89c4\u5219\u3001\u4efb\u52a1\u8fd0\u884c\u72b6\u6001\u548c\u4efb\u52a1\u8fd0\u884c\u7ed3\u679c</li> <li>\u5206\u6790\u5e08\u3001\u6570\u636e\u5f00\u53d1\u5de5\u7a0b\u5e08\u53ef\u4ee5\u770b\u6240\u6709 </li> </ul>"},{"location":"blog/dqc/dqc_design/#_7","title":"\u89c4\u5219\u7ba1\u7406","text":"<p>\u89c4\u5219\u7ba1\u7406\u4e3b\u8981\u7528\u4e8e\u7ba1\u7406\u9884\u5b9a\u4e49\u7684\u89c4\u5219\u548c\u53ef\u5171\u7528\u7684\u81ea\u5b9a\u4e49\u89c4\u5219\u3002\u9884\u5b9a\u4e49\u7684\u89c4\u5219\u76ee\u524d\u521d\u6b65\u8bbe\u5b9a\u53ea\u652f\u6301soda \u768425\u4e2a\u5185\u7f6e\u7684\u89c4\u5219soda-core \u5185\u7f6e\u768425\u4e2a\u89c4\u5219\u76ee\u524d\u9884\u5b9a\u4e49\u89c4\u5219\u53ea\u652f\u6301\u67e5\u770b\u89c4\u5219\u5b9a\u4e49\u3001\u89c4\u5219\u63cf\u8ff0\u7b49\u529f\u80fd\uff0c\u4e0d\u652f\u6301\u5220\u9664\u548c\u4fee\u6539\u81ea\u5b9a\u4e49\u89c4\u5219\u652f\u6301\u67e5\u770b\u89c4\u5219\u5b9a\u4e49\u3001\u4fee\u6539\u89c4\u5219\u5b9a\u4e49\u548c\u5220\u9664\u89c4\u5219\u5b9a\u4e49\u3002\u9884\u5b9a\u4e49\u89c4\u5219\u5305\u542b\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>\u89c4\u5219\u540d\u79f0</li> <li>\u89c4\u5219\u63cf\u8ff0</li> <li>\u89c4\u5219\u9002\u7528\u8303\u56f4(\u8868\u7ea7\u3001\u5217\u7ea7)</li> <li>\u89c4\u5219\u7c7b\u578b(\u552f\u4e00\u6027\u3001\u6570\u503c\u578b(\u5355\u6570\u503c\u578b\u3001\u533a\u95f4\u6570\u503c\u578b)\u3001\u7f3a\u5931\u6027\u3001\u5408\u6cd5\u6027)</li> </ul> <p>\u81ea\u5b9a\u4e49\u89c4\u5219\u5305\u542b\u4ee5\u4e0b\u4fe1\u606f:</p> <ul> <li>\u89c4\u5219\u540d\u79f0</li> <li>\u89c4\u5219\u63cf\u8ff0</li> <li>\u9002\u7528\u8303\u56f4</li> <li>\u89c4\u5219\u7c7b\u578b(\u552f\u4e00\u6027\u3001\u6570\u503c\u578b(\u5355\u6570\u503c\u578b\u3001\u533a\u95f4\u6570\u503c\u578b)\u3001\u7f3a\u5931\u6027\u3001\u5408\u6cd5\u6027)</li> <li>\u89c4\u5219\u8ba1\u7b97 SQL/Query Expression </li> </ul>"},{"location":"blog/dqc/dqc_design/#_8","title":"\u6570\u636e\u8d28\u91cf\u4efb\u52a1\u7ba1\u7406","text":"<p>\u6570\u636e\u8d28\u91cf\u4efb\u52a1\u7ba1\u7406\u5305\u62ec: \u6570\u636e\u96c6\u5c55\u793a\u3001\u6570\u636e\u8d28\u91cf\u4efb\u52a1\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u3001\u6bcf\u65e5\u4efb\u52a1\u6267\u884c\u72b6\u6001\u4fe1\u606f\u7b49\u529f\u80fd </p>"},{"location":"blog/dqc/dqc_design/#_9","title":"\u6570\u636e\u96c6\u5c55\u793a","text":"<p>\u6bcf\u6b21 DBT repo merge \u8fc7\u540e\uff0c\u89e6\u53d1API \u62c9\u53d6\u6700\u65b0\u7684 DBT \u6a21\u578b\u5230\u6570\u636e\u8d28\u91cf\u5e73\u53f0\u4e2d\uff0c\u4e3b\u8981\u5305\u62ec\u7684\u4fe1\u606f: db_name\u3001model_name\u3001owner\u3001table format \u7b49\u4fe1\u606f\uff0c\u540c\u65f6\u6709\u94fe\u63a5\u5230\u6570\u636e\u8d28\u91cf\u4efb\u52a1 CRUD \u754c\u9762\uff0c\u5b9e\u73b0\u7528\u6237\u4ece\u6570\u636e\u96c6\u521b\u5efa\u6570\u636e\u8d28\u91cf\u4efb\u52a1\u7684\u529f\u80fd\u3002 </p>"},{"location":"blog/dqc/dqc_design/#crud","title":"\u6570\u636e\u8d28\u91cf\u4efb\u52a1CRUD\u64cd\u4f5c","text":"<p>\u8fd9\u91cc\u7528\u6237\u53ef\u4ee5\u67e5\u770b\u3001\u6dfb\u52a0\u6216\u8005\u5220\u9664\u6570\u636e\u8d28\u91cf\u89c4\u5219\uff0c\u4e3b\u8981\u5185\u5bb9:\u6570\u636e\u5e93\u540d\u3001dbt model\u540d\u79f0\u3001owner\u3001table format\u3001is_partition \u7b49\u57fa\u7840\u4fe1\u606f\uff0c\u6570\u636e\u6821\u9a8c\u89c4\u5219\u5217\u8868\uff1a\u5206\u8868\u7ea7\u89c4\u5219\u5217\u8868\u3001\u5217\u7ea7\u89c4\u5219\u5217\u8868\uff0c\u89c4\u5219\u5217\u8868\u540e\u8fb9\u53ef\u4ee5\u5b9e\u73b0\u589e\u5220\u6539\u67e5\uff0c\u5927\u81f4\u5982\u4e0b:\u57fa\u7840\u5c5e\u6027:</p> <ul> <li>\u6570\u636e\u5e93\u540d\u79f0</li> <li>dbt model \u540d\u79f0</li> <li>owner</li> <li>table format (parquet\u3001hudi\u3001iceberg\u7b49)</li> <li>is_partition (\u5206\u533a\u8868\u3001\u975e\u5206\u533a\u8868)</li> <li>table size</li> </ul> <p>\u8868\u7ea7\u6821\u9a8c\u89c4\u5219\u5217\u8868:</p> <ul> <li>\u89c4\u5219\u540d\u79f0</li> <li>\u89c4\u5219\u63cf\u8ff0</li> <li>\u89c4\u5219\u9002\u7528\u8303\u56f4(\u8868\u7ea7\u3001\u5217\u7ea7)</li> <li>\u89c4\u5219\u7c7b\u578b(\u552f\u4e00\u6027\u3001\u6570\u503c\u578b(\u5355\u6570\u503c\u578b\u3001\u533a\u95f4\u6570\u503c\u578b)\u3001\u7f3a\u5931\u6027\u3001\u5408\u6cd5\u6027)</li> <li>\u6743\u91cd\u7ea7\u522b</li> <li>Owner</li> <li>\u544a\u8b66\u8ba2\u9605\u5217\u8868</li> </ul> <p>\u5217\u7ea7\u6821\u9a8c\u89c4\u5219\u5217\u8868:</p> <ul> <li>\u89c4\u5219\u540d\u79f0</li> <li>\u89c4\u5219\u63cf\u8ff0</li> <li>\u89c4\u5219\u9002\u7528\u8303\u56f4(\u8868\u7ea7\u3001\u5217\u7ea7)</li> <li>\u89c4\u5219\u7c7b\u578b(\u552f\u4e00\u6027\u3001\u6570\u503c\u578b(\u5355\u6570\u503c\u578b\u3001\u533a\u95f4\u6570\u503c\u578b)\u3001\u7f3a\u5931\u6027\u3001\u5408\u6cd5\u6027)</li> <li>\u6743\u91cd\u7ea7\u522b</li> <li>Owner</li> <li>\u544a\u8b66\u8ba2\u9605\u5217\u8868 </li> </ul>"},{"location":"blog/dqc/dqc_design/#_10","title":"\u6bcf\u65e5\u4efb\u52a1\u6267\u884c\u60c5\u51b5","text":"<p>\u4e3b\u8981\u7528\u4e8e\u67e5\u770b\u6bcf\u65e5\u6821\u9a8c\u89c4\u5219\u7684\u8fd0\u884c\u60c5\u51b5\u3001\u544a\u8b66\u60c5\u51b5\u3002\u5927\u81f4\uff1a</p> dbt \u6a21\u578b\u540d\u79f0 \u89c4\u5219\u540d\u79f0 \u6267\u884c\u5468\u671f \u6267\u884c\u72b6\u6001 \u671f\u671b\u503c \u8fd0\u884c\u503c \u544a\u8b66\u7ea7\u522b \u544a\u8b66\u72b6\u6001 dbt_xxxx_000 row_count 2024-03-28 succeed &gt;=200000 210000 \u90ae\u4ef6 succeed dbt_xxxx_001 row_count 2024-03-28 failed &gt;=200000 0 \u90ae\u4ef6 succeed dbt_xxxx_002 row_count 2024-03-28 failed &gt;=200000 0 \u7535\u8bdd+\u90ae\u4ef6 succeed <p>\u6ce2\u52a8\u7387: 100 * abs(\u6837\u672c\u503c - \u57fa\u51c6\u503c) * 0.01/\u57fa\u51c6\u503c eg: \u8868\u884c\u65707\u5929\u6ce2\u52a8\u7387\uff1a\u57fa\u51c6\u503c\u4e3a7\u5929\u524d\u6837\u672c\uff08\u8868\u884c\u6570\uff09\uff0c\u6bd4\u8f83\u5f53\u5929\u91c7\u96c6\u7684\u8868\u884c\u6570\uff0c\u5bf9\u6bd4\u6ce2\u52a8\u7387\uff0c100 * abs(cnts - cnts_7_days_ago) * 0.01/ cnts_7_days_ago</p>"},{"location":"blog/dqc/%E6%95%B0%E6%8D%AE%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%96%87%E6%A1%A3/","title":"\u6570\u636e\u76d1\u63a7\u67b6\u6784\u6587\u6863","text":""},{"location":"blog/dqc/%E6%95%B0%E6%8D%AE%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%96%87%E6%A1%A3/#_1","title":"\u80cc\u666f","text":"<p>\u6211\u4eec\u57282023\u5e74\u5f15\u5165\u4e86 dbt + soda\uff0c\u89e3\u51b3\u4e86\u5927\u90e8\u5206\u7684\u6570\u636e\u8d28\u91cf\u6821\u9a8c\u7684\u95ee\u9898\uff0c\u4f46\u662f\u53ea\u89e3\u51b3\u4e86\u6570\u636e\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u6570\u636e\u8d28\u91cf\u95ee\u9898\uff0c\u52a0\u4e0a\u4e0a\u624b\u95e8\u69db\u8f83\u9ad8\uff0c\u666e\u901a\u7528\u6237\u6ca1\u6cd5\u76f4\u63a5\u4e0a\u624b\uff0c\u9700\u8981\u6784\u5efa\u4e00\u5957\u524d\u540e\u7aef\u7684\u5e73\u53f0\uff0c\u5e2e\u52a9\u7528\u6237\u5feb\u901f\u4e0a\u624b\uff0c\u5728\u89e3\u51b3\u6570\u636e\u8d28\u91cf\u7684\u540c\u65f6\u80fd\u591f\u5373\u65f6\u7684\u76d1\u63a7\u4e1a\u52a1\u6570\u636e\u7684\u6ce2\u52a8\u60c5\u51b5\uff0c\u53ca\u65f6\u53cd\u9988\u3002\u786e\u4fdd\u6570\u636e\u6ee1\u8db3\u56db\u4e2a\u57fa\u672c\u539f\u5219\uff1a\u5b8c\u6574\u6027\u3001\u51c6\u786e\u6027\u3001\u4e00\u81f4\u6027\u548c\u65f6\u6548\u6027\u3002\u540c\u65f6\uff0c\u8fd8\u9700\u8981\u6ee1\u8db3\u5404\u4e2a\u7528\u6237\u5b9e\u9645\u573a\u666f\u7684\u5b9a\u5236\u5316\u9700\u6c42\u3002</p>"},{"location":"blog/dqc/%E6%95%B0%E6%8D%AE%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%96%87%E6%A1%A3/#_2","title":"\u8bbe\u8ba1\u65b9\u6848","text":"<p>\u5728\u73b0\u6709\u7684 soda DQC \u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u652f\u6301\u7528\u6237\u754c\u9762\u914d\u7f6e\u6821\u9a8c\u89c4\u5219\u7684\u529f\u80fd\uff0c\u652f\u6301 UI \u5230 Soda DSL \u89e3\u6790\u7684\u529f\u80fd\uff0c \u652f\u6301\u5206\u5e03\u5f0f\u6267\u884c\u89c4\u5219\u529f\u80fd\uff0c\u652f\u6301\u7528\u6237\u81ea\u5b9a\u4e49\u544a\u8b66\u89c4\u5219\u529f\u80fd\u3002</p> <p>\u5927\u4f53\u7684\u67b6\u6784\u6d41\u7a0b\u5982\u4e0b\u56fe:</p> <p> \u6574\u4e2a\u7cfb\u7edf\u5206 Master\u3001Worker\u3001Metadata\u3001Monitor 5\u4e2a\u6a21\u5757\uff0c\u6bcf\u4e2a\u6a21\u5757\u7684\u804c\u8d23\u5982\u4e0b:</p> <ul> <li>Master\uff1a\u8d1f\u8d23\u8ddf\u7528\u6237\u4ea4\u4e92\u3001\u7ba1\u7406\u5143\u6570\u636e\u3001\u5b9a\u671f\u626b\u63cf\u6570\u636e\u6e90\u751f\u6210\u6570\u636e\u96c6\u5143\u6570\u636e\u3001\u5b9a\u671f\u6839\u636e\u914d\u7f6e\u751f\u6210\u6821\u9a8c\u89c4\u5219\u4efb\u52a1</li> <li>Metadata\uff1a\u4e3b\u8981\u662f\u8d1f\u8d23\u4fdd\u5b58\u5143\u6570\u636e\uff0c\u786e\u4fdd\u5206\u5e03\u5f0f\u4efb\u52a1\u64cd\u4f5c\u7684\u539f\u5b50\u6027</li> <li>Worker\uff1a\u8d1f\u8d23\u5177\u4f53\u7684\u89c4\u5219\u6821\u9a8c\u4efb\u52a1\u6267\u884c\uff0c\u5305\u62ec\u4ece Metadata \u4e2d\u62a2\u5360\u4efb\u52a1\uff0c\u89e3\u6790\u4efb\u52a1\uff0c\u6267\u884c\u4efb\u52a1\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u66f4\u65b0\u4efb\u52a1\u7684\u5143\u6570\u636e(\u8fd0\u884c\u72b6\u6001\u3001\u6821\u9a8c\u72b6\u6001\u3001\u6821\u9a8c\u7ed3\u679c\u503c\u7b49\u4fe1\u606f)</li> <li>Monitor\uff1a\u4e0d\u65ad\u7684\u53bb poke Metadata \u83b7\u53d6\u8fd0\u884c\u72b6\u6001\u5904\u4e8e\u6821\u9a8c\u5931\u8d25\u4e14\u5c1a\u672a\u53d1\u51fa\u544a\u8b66\u4fe1\u606f\u7684\u4efb\u52a1\uff0c\u6839\u636e\u544a\u8b66\u914d\u7f6e\u4fe1\u606f\u6784\u5efa\u544a\u8b66\u6d88\u606f\u4f53\u53d1\u9001\u7ed9\u544a\u8b66\u5e73\u53f0\u6216\u8005\u76f4\u63a5\u53d1\u51fa\u544a\u8b66\u4fe1\u606f\u5230\u7528\u6237\u7684\u90ae\u7bb1\u6216\u8005\u4f01\u4e1a\u5fae\u4fe1\u4e2d</li> </ul>"},{"location":"blog/dqc/%E6%95%B0%E6%8D%AE%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%96%87%E6%A1%A3/#master","title":"Master \u8bbe\u8ba1","text":"<p>Master \u4e3b\u8981\u63d0\u4f9b\u4ee5\u4e0b\u529f\u80fd: \u7528\u6237\u4ea4\u4e92 API\u3001\u5143\u6570\u636e\u7ba1\u7406 API\u3001\u6570\u636e\u6e90\u626b\u63cf\u3001\u6570\u636e\u96c6\u751f\u6210\u3001\u6821\u9a8c\u89c4\u5219\u4efb\u52a1\u751f\u6210API\u3002 \u7528\u6237\u901a\u8fc7\u754c\u9762\u914d\u7f6e\u6570\u636e\u6e90\uff0c\u6570\u636e\u6e90\u5143\u6570\u636e\u4fe1\u606f\u5199\u5165\u5230 metadata \u4e2d\uff0cmaster \u7684 datasource scan \u8fdb\u7a0b\u4f1a\u6839\u636e\u5143\u6570\u636e\uff0c\u626b\u63cf\u6570\u636e\u6e90\u83b7\u53d6\u9700\u8981\u7684\u6570\u636e\u96c6\u3002 \u6570\u636e\u6e90\u5143\u6570\u636e</p> \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u63cf\u8ff0 \u5907\u6ce8 \u6570\u636e\u6e90\u540d\u79f0 \u7528\u4e8e\u6807\u8bb0\u6570\u636e\u6e90\uff0c\u9700\u8981\u5168\u5c40\u552f\u4e00\uff0c\u53ef\u4ee5\u91c7\u7528 {type}{catalog} \u6570\u636e\u6e90\u7c7b\u578b \u53ef\u652f\u6301: datalake\u3001rds\u3001mpp\u7b49\u7c7b\u578b \u6570\u636e\u6e90 host \u6570\u636e\u6e90 port \u6570\u636e\u6e90 user \u6570\u636e\u6e90 password db_name \u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u5982\u679c db_name \u4e0d\u586b\u5199\u3001\u90a3\u4e48\u91c7\u96c6\u6240\u6709\u7684db include_db_list \u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u5982\u679c db_name\u4e0d\u586b\u5199\uff0c\u90a3\u4e48\u91c7\u96c6include_db_list\u91cc\u7684db exclude_db_list \u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u5982\u679c db_name\u4e0d\u586b\u5199\uff0c\u90a3\u4e48\u91c7\u96c6\u6240\u6709\u4e0d\u5728exclude_db_list\u91cc\u7684 db \u6fc0\u6d3b\u72b6\u6001 \u5982\u679c\u4e3a\u6fc0\u6d3b\u72b6\u6001\uff0c\u90a3\u4e48\u53ef\u4ee5\u542f\u52a8\u91c7\u96c6\u4efb\u52a1\uff0c\u5426\u5219\u65e0\u6cd5\u6267\u884c\u91c7\u96c6\u64cd\u4f5c \u8c03\u5ea6\u5468\u671f \u53ef\u4ee5\u662f @daily\u3001@hourly \u4e5f\u53ef\u4ee5\u662f \u666e\u901a\u7684 crontab \u8868\u8fbe\u5f0f <p>\u6570\u636e\u96c6\u5143\u6570\u636e</p> \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u63cf\u8ff0 \u5907\u6ce8 data_source_name \u6570\u636e\u6e90\u540d\u79f0 db_name DB \u540d\u79f0 table_name Table \u540d\u79f0 dataset_name \u6570\u636e\u96c6\u540d\u79f0 schedule_interval \u8c03\u5ea6\u5468\u671f is_active \u6fc0\u6d3b\u72b6\u6001 <p>\u6821\u9a8c\u89c4\u5219\u5143\u6570\u636e</p> \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u63cf\u8ff0 \u5907\u6ce8 dataset_name \u6570\u636e\u96c6\u540d\u79f0 check_name \u89c4\u5219\u540d\u79f0 check_yml \u89c4\u5219\u914d\u7f6e yml weight \u6743\u91cd owner check \u7684owner alert_list \u9ad8\u7ea7\u5217\u8868 <p>\u6821\u9a8c\u89c4\u5219\u4efb\u52a1\u5143\u6570\u636e</p> \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u63cf\u8ff0 \u5907\u6ce8 dataset_name \u6570\u636e\u96c6\u540d\u79f0 check_name \u89c4\u5219\u540d\u79f0 execution_date \u8fd0\u884c\u5468\u671f weight \u6743\u91cd owner \u89c4\u5219owner state \u89c4\u5219\u8fd0\u884c\u72b6\u6001 retry_number \u91cd\u8bd5\u6b21\u6570 start_date \u5f00\u59cb\u65f6\u95f4 end_date \u7ed3\u675f\u65f6\u95f4 <p>\u6821\u9a8c\u89c4\u5219\u4efb\u52a1\u7ed3\u679c\u5143\u6570\u636e</p> \u5b57\u6bb5\u540d\u79f0 \u5b57\u6bb5\u63cf\u8ff0 \u5907\u6ce8 dataset_name \u6570\u636e\u96c6\u540d\u79f0 check_name \u6821\u9a8c\u540d\u79f0 execution_date \u6267\u884c\u5468\u671f owner owner check_attribute \u544a\u8b66\u89c4\u5219\u9608\u503c alert_list \u544a\u8b66\u5217\u8868 result_value \u6821\u9a8c\u7ed3\u679c\u503c state \u6821\u9a8c\u72b6\u6001\uff1apass\u3001fail\u3001error alert_tag \u544a\u8b66\u72b6\u6001"},{"location":"blog/dqc/%E6%95%B0%E6%8D%AE%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%96%87%E6%A1%A3/#metadata","title":"Metadata \u8bbe\u8ba1","text":"<p>\u76ee\u524d\u4f7f\u7528 RDS \u5f53\u4f5c metadata \u6a21\u5757\uff0c\u76ee\u524d\u538b\u6d4b\u662f\u80fd\u652f\u6491 2000 \u5de6\u53f3\u7684\u5e76\u884c\u64cd\u4f5c, \u6211\u4eec\u76ee\u524d\u7684\u96c6\u7fa4\u6700\u591a\u5c31\u542f 500 \u4e2a pod\uff0c\u8db3\u4ee5\u652f\u6491\u6211\u4eec\u7684\u4e1a\u52a1\u3002</p>"},{"location":"blog/dqc/%E6%95%B0%E6%8D%AE%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%96%87%E6%A1%A3/#worker","title":"Worker \u8bbe\u8ba1","text":"<p>worker \u4e3b\u8981\u662f\u53bb\u83b7\u53d6\u53ef\u6267\u884c\u7684\u6821\u9a8c\u4efb\u52a1\uff0c\u6267\u884c\u6821\u9a8c\u4efb\u52a1\u3002</p> <p>\u5927\u81f4\u6d41\u7a0b\u5982\u4e0b\u56fe:</p> <p></p>"},{"location":"blog/dqc/%E6%95%B0%E6%8D%AE%E7%9B%91%E6%8E%A7%E6%9E%B6%E6%9E%84%E6%96%87%E6%A1%A3/#monitor","title":"Monitor \u8bbe\u8ba1","text":"<p>\u5468\u671f\u6027\u7684\u53bb\u8f6e\u8be2\u6821\u9a8c\u89c4\u5219\u4efb\u52a1\u7ed3\u679c\u5143\u6570\u636e\uff0c\u83b7\u53d6\u9700\u8981\u53d1\u51fa\u544a\u8b66\u7684\u4efb\u52a1\uff0c\u6784\u5efa\u544a\u8b66\u6d88\u606f\u4f53\u3002</p>"},{"location":"blog/ldap/ldap/","title":"datahub-project \u901a\u8fc7LDAP\u767b\u9646","text":"<p>\u00a0\u00a0\u00a0\u00a0\u6700\u8fd1\u5728\u8c03\u7814datahub-project\uff0c\u6211\u4eec\u5e0c\u671b\u4f7f\u7528\u7edf\u4e00\u7684LDAP\u767b\u9646\uff0c\u4e4b\u524d\u6ca1\u5f04\u8fc7LDAP\uff0c\u8c03\u8bd5\u4e86\u5f88\u4e45\uff0c\u624d\u7ec8\u4e8e\u641e\u5b9a\u3002</p>"},{"location":"blog/ldap/ldap/#_1","title":"\u8c03\u8bd5\u6b65\u9aa4\u5982\u4e0b","text":"<ul> <li>\u751f\u6210jaas.conf\u6587\u4ef6</li> <li>\u5c06jaas.conf \u6302\u8f7d\u5230datahub-frontend\u7684/datahub-frontend/conf\u76ee\u5f55\u4e0b\u6216\u8005\u91cd\u65b0\u6253DockerImage\uff0c\u5c06jaas.conf\u62f7\u8d1d\u5230datahub-frontend\u7684/datahub-frontend/conf\u76ee\u5f55\u4e0b\uff0c \u6211\u4eec\u56e0\u4e3a\u505a\u4e86\u4e00\u4e9b\u4fee\u6539\uff0c\u6240\u4ee5\u5c31\u76f4\u63a5\u5728\u91cd\u65b0\u6253image\u65f6\uff0c\u62f7\u8d1d\u8fc7\u53bb\u4e86</li> </ul>"},{"location":"blog/ldap/ldap/#jaas","title":"jaas \u914d\u7f6e\u5982\u4e0b","text":"<pre><code>WHZ-Authentication {\ncom.sun.security.auth.module.LdapLoginModule sufficient\njava.naming.security.authentication=\"simple\"\nuserProvider=\"ldap://xxx.xxx.xxx.xxx:389/{baseDn}\"\nuserFilter=\"(&amp;(objectClass=person)(sAMAccountName={USERNAME}))\"\njava.naming.security.principal=\"{service_account}\"\njava.naming.security.credentials=\"{service_password}\"\nuseSSL=false\ndebug=true;\n};\n</code></pre>"},{"location":"blog/ray/2024-11-21/","title":"Ray perjob \u6a21\u5f0f\u4e0b\uff0chead \u5185\u5b58\u5360\u7528\u7387\u98d9\u5347","text":"<p>\u6211\u4eec\u5728 Ray Perjob \u6a21\u5f0f\u4e0b\u8dd1 Ray \u4efb\u52a1\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u4efb\u52a1\u7ecf\u5e38\u629b\u51fa\u5f02\u5e38\u9000\u51fa\uff0c\u627e\u4e0d\u5230\u4efb\u4f55\u6709\u6548\u7684\u65e5\u5fd7\uff0c\u901a\u8fc7\u89c2\u5bdf\u4efb\u52a1\u7684\u5185\u5b58\u3001CPU\u5360\u7528\u7387\uff0c\u53d1\u73b0 head \u7684 CPU \u548c \u5185\u5b58\u5360\u7528\u7387\u975e\u5e38\u9ad8\uff0c \u57fa\u672c\u4e0a\u4e0e worker \u6301\u5e73\uff0c\u7406\u8bba\u4e0a perjob head \u53ea\u7ef4\u62a4\u57fa\u672c\u7684 GCS \u670d\u52a1\uff0c\u5185\u5b58\u548c CPU \u4e0d\u5e94\u8be5\u5f88\u9ad8\u3002</p> <p>\u901a\u8fc7\u6587\u6863: Ray \u5185\u5b58\u5206\u6790 \u4e86\u89e3\u5230\uff0cray \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cperjob \u6a21\u5f0f\u4e0b\uff0chead \u4e5f\u4f1a\u8dd1\u4efb\u52a1\u3002</p> <p>\u8981\u60f3\u4e0d\u8ba9 head \u8dd1\u4efb\u52a1\uff0c\u53ea\u80fd\u901a\u8fc7\u5728 headGroupSpec \u7684 rayStartParams \u4e2d\u52a0\u53c2\u6570: num-cpus: \"0\" \u89e3\u51b3\uff0c\u5927\u81f4\u5982\u4e0b: <pre><code>  rayClusterSpec:\n    rayVersion: '2.9.0'\n    headGroupSpec:\n      rayStartParams:\n        num-cpus: \"0\"\n        dashboard-host: '0.0.0.0'\n</code></pre></p>"},{"location":"blog/ray/Ray%20on%20k8s/","title":"Ray on k8s","text":""},{"location":"blog/ray/Ray%20on%20k8s/#ray-on-k8s-data-eng","title":"Ray on k8s \u5728 Data-ENG \u4e2d\u7684\u5e94\u7528","text":""},{"location":"blog/ray/Ray%20on%20k8s/#aliyun-spot-eci-ray-worker","title":"\u4f7f\u7528 aliyun spot eci \u542f\u52a8 Ray Worker","text":"<pre><code>image:\n  repository: rayproject/ray\n  tag: 2.34.0\n  pullPolicy: Always\n\nhead:\n  resources:\n    limits:\n      cpu: \"4\"\n      # To avoid out-of-memory issues, never allocate less than 2G memory for the Ray head.\n      memory: \"8G\"\n    requests:\n      cpu: \"1\"\n      memory: \"2G\"\n\nworker:\n  groupName: workergroup\n  labels:\n    alibabacloud.com/eci: \"true\"\n  annotations:\n    k8s.aliyun.com/eci-spot-strategy: \"SpotAsPriceGo\"\n    k8s.aliyun.com/eci-ram-role-name: \"infra-emr\"\n    sidecar.istio.io/inject: \"false\"\n#  replicas: 3\n#  minReplicas: 3 \n  maxReplicas: 3\n  resources:\n    limits:\n      cpu: \"2\"\n      memory: \"4G\"\n</code></pre>"},{"location":"blog/ray/Ray%20on%20k8s/#aliyun-spot-eci-ray-per-job","title":"\u4f7f\u7528 aliyun spot eci \u542f\u52a8 Ray Per Job","text":"<p>\u6a21\u7248\u89c1 aliyun spot eci \u542f ray perjob \u6a21\u677f</p>"},{"location":"blog/spark/%E5%8A%A8%E6%80%81%E5%88%86%E5%8C%BA%E8%A3%81%E5%89%AA/","title":"\u52a8\u6001\u5206\u533a\u88c1\u526a","text":""},{"location":"blog/starrocks/starrocks%20%E5%A4%A7%E8%A1%A8schema%20%E5%8F%98%E6%9B%B4%E5%A4%B1%E8%B4%A5/","title":"StarRocks 3.2 \u5b58\u7b97\u5206\u79bb\u5927\u8868 schema \u53d8\u66f4\u8d85\u65f6","text":"<p>2025\u5e74\u4e0a\u73ed\u7b2c\u4e00\u5929\uff0c\u5ba2\u6237\u65b0\u589e\u4e86\u5b57\u6bb5\uff0c\u9700\u8981\u5728 StarRocks \u7aef\u4e5f\u65b0\u589e\u76f8\u5e94\u7684\u5b57\u6bb5\uff0c\u4ee5\u9002\u914d\u4e1a\u52a1\u65b92025\u5e74\u7684\u8fd0\u8425\u7b56\u7565\u9700\u6c42\uff0c\u6267\u884c schema \u53d8\u66f4\u7684\u8868\u5927\u5c0f\u662f 500G \u5de6\u53f3\uff0c  StarRocks \u662f 3.2 \u5b58\u7b97\u5206\u79bb\u7248\u672c\uff0c\u7531\u4e8e StarRocks \u6267\u884c job \u64cd\u4f5c\u90fd\u662f\u5f02\u6b65\u5904\u7406\u7684\uff0c\u6267\u884c<code>alter table xxx add column x x default 'v'</code>\uff0c\u5ba2\u6237\u7aef\u91cc\u9762\u8fd4\u56de\u6210\u529f\uff0c \u4ee5\u4e3a SQL \u5df2\u7ecf\u8fd0\u884c\u6210\u529f\u4e86\uff0c\u7136\u540e\u5c31\u76f4\u63a5\u4e0a\u5148\u4ee3\u7801\u3002</p> <p>\u5927\u69825\u5206\u949f\u540e\uff0ck8s pod \u75af\u72c2\u544a\u8b66\uff0c\u62a5\u627e\u4e0d\u5230 column\uff0c\u8d76\u5fd9\u786e\u8ba4 schema, \u786e\u5b9e\u6ca1\u6709\u66f4\u65b0\u6210\u529f\uff0c\u67e5\u770b alter \u4efb\u52a1\u72b6\u6001<code>show alter table COLUMN;</code> \u53d1\u73b0\u4efb\u52a1\u8fd8\u5728\u8fd0\u884c\u5f53\u4e2d\uff0c\u8fdb\u5ea6\u53ea\u6709 50%\uff0c\u4ee5\u4e3a\u7b49\u4e00\u4f1a\u5c31\u597d\u4e86\uff0c\u6ca1\u6709\u56de\u6eda\u4ee3\u7801\u3002</p> <p>\u518d\u8fc75\u5206\u949f\u540e\uff0ck8s pod \u8fd8\u5728\u75af\u72c2\u7684\u62a5\u627e\u4e0d\u5230 column\uff0c\u67e5\u770balter \u4efb\u52a1\u72b6\u6001\uff0c\u4efb\u52a1\u5df2\u7ecf cancel\u4e86\uff0cerror message: <code>schema change task failed after try three times: task type: ALTER, status_code: CANCELLED, task elapsed 223 seconds since it is inserted to queue, it is timeout, backendId: 10005, signature: 147405</code></p> <p>\u518d\u5c1d\u8bd5\u63d0\u4ea4 alter \u4efb\u52a1\uff0c\u53d1\u73b010\u5206\u949f\u540e\uff0c\u8fd8\u662f\u62a5 timeout\uff0c\u53d1\u73b0\u4e0d\u5bf9\u52b2\uff0c\u8d76\u5fd9\u56de\u6eda\u4ee3\u7801</p> <p>\u7531\u4e8e\u516c\u53f8\u964d\u672c\u589e\u6548\uff0c\u4eba\u529b\u88ab\u964d\u6389\u4e86\uff0c\u6211\u4eec\u5c06 StarRocks \u6362\u6210\u4e86\u67d0\u516c\u6709\u4e91\u5168\u6258\u7ba1\u7684 StarRocks\uff0c\u5168\u6258\u7ba1\u561b\uff01\u5c31\u662f\u6258\u7740\u4e0d\u7ba1\uff01\u90a3\u4e9b\u5916\u5305\u5ba2\u670d\u5404\u79cd\u5df2\u8bfb\u4e71\u56de\uff0c\u770b\u4e0d\u4e0b\u53bb\u4e86\uff0c\u8d76\u7d27github \u4e0b\u4ee3\u7801\uff0c\u3002</p> <p>\u67e5\u770b\u4ee3\u7801\u53d1\u73b0\uff0c\u62a5\u9519\u6d88\u606f\u4ece\u8fd9\u5757\u4ee3\u7801\u4e2d\u6765:</p> <p></p> <p>\u8fd9\u4e2a\u53c2\u6570\u662f Job \u7ea7\u522b\u7684\uff0c\u914d\u7f6e\u4e4b\u540e\u4e0d\u9700\u8981\u91cd\u542f\uff0c\u5c31\u53ef\u4ee5\u751f\u6548\uff0c\u91cc\u9762\u914d\u7f6e\u4e00\u4e0b\uff0c\u91cd\u65b0\u6267\u884c alter \u547d\u4ee4\uff0c\u53d1\u73b0\u5df2\u7ecf\u4e0d\u62a5\u9519\u4e86\uff0c\u4f46\u662f\u53d1\u73b0\u8fd8\u662f\u975e\u5e38\u7684\u6162\uff0c\u6700\u540e\u82b1\u4e862\u4e2a\u5c0f\u65f6\u7ec8\u4e8e\u6267\u884c\u6210\u529f\u3002</p> <p>\u6b64\u5916\uff1a3.3 \u7248\u672c\u5df2\u7ecf\u652f\u6301 fast  schema evolution\uff0c\u5982\u679c\u6709\u4eba\u529b\uff0c\u53ef\u4ee5\u5347\u7ea7\u5230 3.3\uff0c\u6211\u4eec\u4eba\u529b\u5df2\u7ecf\u88ab\u964d\u6389\u4e86\uff0c\u4f30\u8ba1\u63a5\u4e0b\u6765\u7684\u4e00\u6bb5\u65f6\u95f4\u5185\u90fd\u6ca1\u6709\u4eba\u529b\u53bb\u505a\u8fd9\u4e9b\u4e8b\u60c5\u4e86</p>"},{"location":"blog/starrocks/starrocks%20%E5%A4%A7%E8%A1%A8schema%20%E5%8F%98%E6%9B%B4%E5%A4%B1%E8%B4%A5/#_1","title":"\u6559\u8bad\uff1a","text":"<ul> <li>\u5728\u4ee3\u7801\u4e0a\u7ebf\u524d\uff0c\u5148\u628a\u5404\u79cd\u53ef\u80fd\u51fa\u9519\u7684\u6b65\u9aa4\u5148\u68c0\u67e5\u4e00\u904d</li> <li>schema \u53d8\u66f4\uff0c\u5f97\u5148\u770b\u4e00\u4e0bschema \u662f\u5426\u5df2\u7ecf\u53d8\u66f4\u597d\u4e86\u518d\u4e0a\u4ee3\u7801</li> </ul>"},{"location":"blog/starrocks/unified-catalog%20%E5%85%83%E6%95%B0%E6%8D%AE%E7%BC%93%E5%AD%98%E5%BC%95%E5%8F%91%E7%9A%84%E6%83%A8%E6%A1%88/","title":"Unified catalog \u5143\u6570\u636e\u7f13\u5b58\u5f15\u53d1\u7684\u60e8\u6848","text":""},{"location":"blog/starrocks/unified-catalog%20%E5%85%83%E6%95%B0%E6%8D%AE%E7%BC%93%E5%AD%98%E5%BC%95%E5%8F%91%E7%9A%84%E6%83%A8%E6%A1%88/#unified-catalog","title":"unified-catalog \u5143\u6570\u636e\u7f13\u5b58\u5f15\u53d1\u7684\u60e8\u6848","text":"<p>\u6211\u4eec\u57285\u6708\u4efd\u5f15\u5165\u4e86 StarRocks 3.x \u5b58\u7b97\u5206\u79bb\u7248\u672c\u7684\u65f6\u5019\uff0c\u540c\u65f6\u5f15\u5165\u4e86 unified-catalog, \u901a\u8fc7 unified-catalog \u6211\u4eec\u6784\u5efa\u7684 lakehouse \u5728\u67e5\u8be2\u7684\u65f6\u5019\u5c31\u4e0d\u7528\u518d\u533a\u5206\u5e95\u5c42\u662f parquet\u3001hudi\u3001iceberg \u8fd8\u662f paimon\uff0ccatalog \u7edf\u4e00\u4e3a lakehouse</p> <p>\u5728\u521b\u5efa catalog \u7684\u65f6\u5019\uff0c\u6ca1\u6709\u4ed4\u7ec6\u67e5\u770b\u53c2\u6570\u8bbe\u7f6e\uff0c\u8fd0\u884c\u4e86\u534a\u5e74\u4e4b\u540e\uff0c\u968f\u7740 iceberg \u8868\u4e0d\u65ad\u65b0\u589e\uff0c\u6709\u4e9b\u7269\u5316\u89c6\u56fe\u57fa\u4e8e iceberg \u8868\u521b\u5efa\u7684\uff0c\u7269\u5316\u89c6\u56fe\u7684\u66f4\u65b0\u662f\u901a\u8fc7 airflow \u8c03\u5ea6\u53bb\u5237\u65b0\u7684\uff0cairflow \u4f1a\u5728 iceberg \u8868\u4efb\u52a1\u5b8c\u6210\u540e\uff0c\u7acb\u5373\u53bb\u5237\u65b0\u7269\u5316\u89c6\u56fe\u3002</p> <p>\u524d\u51e0\u5929\u7a81\u7136\u53d1\u73b0\uff0c\u7269\u5316\u89c6\u56fe\u7684\u6570\u636e\u6ca1\u6709\u66f4\u65b0\uff0c\u67e5\u770b\u65e5\u5fd7\u53d1\u73b0 \u5237\u65b0\u4efb\u52a1\u5df2\u7ecf\u6267\u884c\u8fc7\uff0ciceberg \u8868\u4e5f\u662f\u53ea\u5199\u5165\u4e00\u904d\uff0c\u800c\u4e14\u662f\u5728\u7269\u5316\u89c6\u56fe\u5237\u65b0\u524d\u5c31\u5df2\u7ecf\u5199\u5165\u4e86\u3002</p> <p>\u6000\u7591\u662f\u5143\u6570\u636e\u7f13\u5b58\u4e86\uff0c\u5bfc\u81f4\u7269\u5316\u89c6\u56fe\u5728\u5237\u65b0\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u53ca\u65f6\u8bfb\u5230 iceberg \u521a\u521a\u5199\u5165\u7684\u6570\u636e\u3002</p> <p>\u901a\u8fc7\u4e00\u4e2a\u5b9e\u65f6\u5199 iceberg \u7684\u4efb\u52a1\uff0c\u7528 spark \u548c starrocks \u5206\u522b\u5b9e\u65f6\u53bb\u67e5\u8be2\u7684\u65f6\u5019\u53d1\u73b0\uff0cstarrocks \u4f1a\u6709\u90e8\u5206\u67e5\u8be2\u6ca1\u6709\u53ca\u65f6\u67e5\u5230\u6570\u636e\uff0c\u5ef6\u8fdf\u5927\u6982\u57281\u5206\u949f\u5185\uff0c\u57fa\u672c\u53ef\u4ee5\u5224\u65ad\u662f starrocks \u91cc iceberg \u76f8\u5173\u7684\u5143\u6570\u636e\u6ca1\u6709\u53ca\u65f6\u5237\u65b0\u3002</p> <p>\u63a5\u4e0b\u6765\u7684\u64cd\u4f5c\u5c31\u662f\u5982\u4f55\u5728 catalog \u4e2d\u4fee\u6539\u5143\u6570\u636e\u540c\u6b65\u7b56\u7565\u3002</p> <p>\u6211\u4eec\u6253\u7b97\u5c06\u5143\u6570\u636e\u540c\u6b65\u7f13\u5b58\u5173\u95ed\uff0c\u4f46\u662f\u67e5\u770b\u6587\u6863\u53d1\u73b0\u6ca1\u6709 alter catalog \u7684\u529f\u80fd\uff0c\u53ea\u80fd\u5220\u9664\u91cd\u5efa\uff0c\u9700\u8981\u5728\u4e0d\u5f71\u54cd\u4e1a\u52a1\u7684\u524d\u63d0\u4e0b\u64cd\u4f5c\uff0c\u8003\u8651\u5230\u6211\u4eec\u7684 catalog \u53ea\u6d89\u53ca\u5230\u8bfb\uff0c\u90fd\u662f\u62a5\u8868\u53bb\u67e5\u8be2\u7684\uff0c\u5206\u949f\u5185\u64cd\u4f5c\u5b8c\u5bf9\u7528\u6237\u7684\u5f71\u54cd\u4e0d\u5927\u3002</p> <p>\u6211\u4eec\u76f4\u63a5\u5220\u9664 catalog\uff0c\u7136\u540e\u91cd\u5efa\u91cd\u540d catalog\u3002</p> <p>\u91cd\u5efa\u540e\u91cc\u9762\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\uff0c\u5b9e\u65f6\u4efb\u52a1\u901a\u8fc7 spark \u548c starrocks \u67e5\u8be2\u57fa\u672c\u4e0a\u6ca1\u6709\u5dee\u522b\u4e86\u3002</p> <p>OK\uff0c\u4ee5\u4e3a\u5230\u8fd9\u91cc\u5c31\u7ed3\u675f\u4e86\uff0c\u6ca1\u60f3\u5230\u3002\u3002\u3002</p> <p>\u5927\u6982\u534a\u5c0f\u65f6\u540e\uff0c\u7528\u6237\u53cd\u9988\uff0c\u62a5\u8868\u67e5\u4e0d\u5230\u6570\u636e\u4e86\u3002\u3002\u3002\u3002\u3002</p> <p>\u67e5\u770b\u65e5\u5fd7\u53d1\u73b0\uff0c\u62a5\u8868\u67e5\u8be2 starrocks \u7684\u7528\u6237\u6ca1\u6709\u6743\u9650\u67e5\u8be2\u65b0\u521b\u5efa\u7684 catalog \u4e86\u3002</p> <p>\u64e6\u770b\u4ee3\u7801\u53d1\u73b0\u5728\u5220\u9664 catalog \u7684\u65f6\u5019\uff0c\u6743\u9650\u4e5f\u6e05\u7406\u4e86\u3002\u3002\u3002\u3002</p> <p>\u597d\u5427\uff0c\u91cd\u65b0\u7ed9 \u7528\u6237\u6388\u6743\uff0c\u7136\u540e\u5f00\u59cb\u5199\u4e8b\u6545\u62a5\u544a\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002</p> <p>\ud83d\ude2e\u200d\ud83d\udca8 \u6ca1\u529b\u6c14\u4e86</p>"},{"location":"blog/%E6%9D%82%E6%96%87/Could%20not%20resolve%20host%3A%20mirrorlist.centos.org%3B%20Unknown%20error/","title":"Could not resolve host: mirrorlist.centos.org; Unknown error","text":"<p>\u6700\u8fd1\u5728\u57fa\u4e8eCentOS 7 \u6253 Docker \u5305, \u53d1\u73b0\u65e0\u8bba\u600e\u4e48\u66ff\u6362 <code>CentOS-Base.repo</code> \u90fd\u4e0d\u751f\u6548\uff0c\u8001\u662f\u62a5\u9519\u8bef: <pre><code>Loaded plugins: fastestmirror, ovl\nLoading mirror speeds from cached hostfile\nCould not retrieve mirrorlist http://mirrorlist.centos.org?arch=x86_64&amp;release=7&amp;repo=sclo-rh error was\n14: curl#6 - \"Could not resolve host: mirrorlist.centos.org; \u672a\u77e5\u7684\u9519\u8bef\"\n\n\n One of the configured repositories failed (Unknown),\n and yum doesn't have enough cached data to continue. At this point the only\n safe thing yum can do is fail. There are a few ways to work \"fix\" this:\n\n     1. Contact the upstream for the repository and get them to fix the problem.\n\n     2. Reconfigure the baseurl/etc. for the repository, to point to a working\n        upstream. This is most often useful if you are using a newer\n        distribution release than is supported by the repository (and the\n        packages for the previous distribution release still work).\n\n     3. Run the command with the repository temporarily disabled\n            yum --disablerepo=&lt;repoid&gt; ...\n\n     4. Disable the repository permanently, so yum won't use it by default. Yum\n        will then just ignore the repository until you permanently enable it\n        again or use --enablerepo for temporary usage:\n\n            yum-config-manager --disable &lt;repoid&gt;\n        or\n            subscription-manager repos --disable=&lt;repoid&gt;\n\n     5. Configure the failing repository to be skipped, if it is unavailable.\n        Note that yum will try to contact the repo. when it runs most commands,\n        so will have to try and fail each time (and thus. yum will be be much\n        slower). If it is a very temporary problem though, this is often a nice\n        compromise:\n\n            yum-config-manager --save --setopt=&lt;repoid&gt;.skip_if_unavailable=true\n\nCannot find a valid baseurl for repo: centos-sclo-rh/x86_64\n</code></pre></p> <p>\u540e\u6765\u5728 https://serverfault.com/questions/1161816/mirrorlist-centos-org-no-longer-resolve \u7684\u5e2e\u52a9\u4e0b\uff0c\u6700\u540e\u89e3\u51b3\u4e86\uff0c\u53d1\u51fa\u6765\u8bb0\u5f55\u4ee5\u4e0b\uff0c\u907f\u514d\u4e0b\u6b21\u627e\u4e0d\u5230\u89e3\u51b3\u529e\u6cd5\u4e86</p>"},{"location":"blog/%E6%9D%82%E6%96%87/Could%20not%20resolve%20host%3A%20mirrorlist.centos.org%3B%20Unknown%20error/#_1","title":"\u89e3\u51b3\u529e\u6cd5","text":"<pre><code>sed -i s/mirror.centos.org/vault.centos.org/g /etc/yum.repos.d/*.repo\nsed -i s/^#.*baseurl=http/baseurl=http/g /etc/yum.repos.d/*.repo\nsed -i s/^mirrorlist=http/#mirrorlist=http/g /etc/yum.repos.d/*.repo\n</code></pre>"},{"location":"blog/%E6%9D%82%E6%96%87/DuckDB/","title":"DuckDB load plugin \u4f7f\u7528\u4e0d\u5f53\u5bfc\u81f4\u7684\u4efb\u52a1\u96c6\u4f53\u5931\u8d25","text":""},{"location":"blog/%E6%9D%82%E6%96%87/DuckDB/#_1","title":"\u80cc\u666f","text":"<p>\u6211\u4eec\u6709\u4e00\u5806\u4efb\u52a1\u4f7f\u7528\u4e86 duckdb \u6765\u62c9\u53d6 http \u63a5\u53e3\u7684\u6570\u636e\uff0c\u6bcf\u4e2a\u4efb\u52a1\u4e4b\u524d\u90fd\u9700\u8981\u4e0b\u8f7d\u4e00\u904d http_extension \u5b89\u88c5\u62a5\uff0c\u6700\u8fd1\u4e3a\u4e86\u964d\u672c\u589e\u6548\uff0c\u6211\u4eec\u90e8\u5206\u53ef\u7528\u533a\u7684\u516c\u7f51\u5e26\u5bbd\u88ab\u964d\u7ea7\u4e86\uff0c\u5bfc\u81f4download \u5931\u8d25\uff0c\u540e\u7eed\u4e00\u5806\u4efb\u52a1\u5168\u6302\u4e86</p>"},{"location":"blog/%E6%9D%82%E6%96%87/DuckDB/#_2","title":"\u8fc7\u7a0b","text":"<p>\u5728\u6bcf\u6b21\u901a\u8fc7 duckdb \u6765\u62c9\u53d6http\u63a5\u53e3\u6570\u636e\u65f6\uff0c\u90fd\u9700\u8981\u4e0b\u8f7d http_extension\uff0c\u4ee5\u524d\u4efb\u52a1\u90fd\u662f\u51e0\u5206\u949f\u5c31\u8dd1\u5b8c\u4e86\uff0c\u6211\u4eec\u8bbe\u7f6e\u7684\u4efb\u52a1\u8d85\u65f6\u65f6\u95f4\u662f15\u5206\u949f\uff0c\u6700\u8fd1\u51e0\u5929\u4efb\u52a1\u90fd\u51fa\u73b0\u8d85\u65f6\u60c5\u51b5\uff0c\u8d85\u65f6\u4e4b\u524d\u4efb\u52a1\u90fd\u6ca1\u6709\u51fa\u73b0\u5f02\u5e38\u65e5\u5fd7\uff0c \u91cd\u65b0clear airflow \u4efb\u52a1\u4e5f\u4e0d\u4f1a\u6210\u529f\uff0c\u4f46\u662f\u5728\u63a5\u53e3\u673a\u6267\u884c\u4efb\u52a1\u65f6\uff0c\u4efb\u52a1\u5f88\u5feb\u5c31\u8dd1\u5b8c\u4e86\uff0c\u6000\u7591\u662f\u51fa\u95ee\u9898\u7684\u53ef\u7528\u533a\u673a\u5668\u6709\u95ee\u9898\uff0c\u91cd\u542f airflow \u4efb\u52a1\uff0c\u5c06\u4efb\u52a1\u7684\u53ef\u7528\u533a\u6539\u4e3a\u8ddf\u63a5\u53e3\u673a\u76f8\u540c\u7684\u53ef\u7528\u533a\uff0c\u53d1\u73b0\u4efb\u52a1\u5f88\u5feb\u5c31\u8dd1\u5b8c\u4e86\u3002   \u91cd\u65b0\u63d0\u4ea4\u4efb\u52a1\uff0c\u5728\u4efb\u52a1\u7684\u6bcf\u4e2a\u6b65\u9aa4\u90fd\u6253\u5370\u65e5\u5fd7\uff0c\u53d1\u73b0\u4efb\u52a1\u4e3b\u8981\u5361\u6b7b\u5728 duckdb \u62c9\u53d6 http_extension \u8fd9\u4e00\u6b65\u3002\u8fdb\u5165\u5230 \u51fa\u95ee\u9898\u4efb\u52a1\u7684 Pod \u4e0a\u6267\u884c curl -O xxxx.gz \u4e5f\u65e0\u6cd5\u6267\u884c\uff0cping google \u548c github \u90fd\u6ca1\u6709\u53cd\u5e94\uff0c\u786e\u5b9a\u8be5\u53ef\u7528\u533a \u5df2\u7ecf\u6ca1\u6709\u516c\u7f51\u7f51\u7edc\u3002</p>"},{"location":"blog/%E6%9D%82%E6%96%87/DuckDB/#fix","title":"Fix \u601d\u8def","text":"<p>\u786e\u5b9a\u65e0\u6cd5\u8bbf\u95ee\u516c\u7f51\u4e4b\u540e\uff0c\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u5c31\u662f\u600e\u4e48\u52a0\u8f7d http_extension \u7684\u95ee\u9898\u4e86\u3002\u76ee\u524d\u6211\u4eec\u7684\u529e\u6cd5\u662f\u76f4\u63a5\u628a http_extension \u6253\u5230 docker image \u4e2d\uff0c\u901a\u8fc7 <code>LOAD '/opt/external-tools/httpfs.duckdb_extension';</code> \u52a0\u8f7d</p>"},{"location":"blog/%E6%9D%82%E6%96%87/Spark%20Application%20ID%20%E5%BC%95%E5%8F%91%E7%9A%84%E6%83%A8%E6%A1%88/","title":"Spark Application ID \u5f15\u53d1\u7684\u60e8\u6848","text":"<p>\u6211\u4eec\u4e8e22\u5e74\u5f00\u59cb\uff0c\u5c06\u4efb\u52a1\u8fc1\u79fb\u5230 Spark on k8s, 23\u5e74\u5e74\u5e95\uff0c\u5c06 Spark \u4efb\u52a1\u5168\u90e8\u8f6c\u6362\u6210 DBT \u4efb\u52a1\uff0c\u901a\u8fc7 dbt run \u6267\u884c\u4efb\u52a1\uff0c2024\u5e74\u5e74\u4e2d\uff0c\u4efb\u52a1\u91cf\u5f00\u59cb\u81a8\u80c0\u5230\u51e0\u5343\u4e2a\uff0c \u4efb\u52a1\u8fbe\u5230\u51e0\u5343\u4e2a\u4e4b\u540e\uff0c\u5e76\u53d1\u4efb\u52a1\u5f00\u59cb\u53d8\u591a\uff0c\u51fa\u73b0\u540c\u4e00\u65f6\u95f4\u70b9\uff0c\u6709\u591a\u4e2a\u4efb\u52a1\u540c\u65f6\u8dd1\u7684\u60c5\u51b5\u3002</p> <p>Spark 3.3 \u4e4b\u524d\uff0cSpark Application ID \u7684\u9ed8\u8ba4\u751f\u6210\u683c\u5f0f: <code>\"spark-application-\" + System.currentTimeMillis</code></p> <p>\u5f53\u51fa\u73b0\u4e24\u4e2a Spark \u4efb\u52a1\u540c\u4e00\u65f6\u523b\u5f00\u59cb\u542f\u52a8\u65f6\uff0c\u5c31\u4f1a\u51fa\u73b0\u5171\u7528 APP ID\u7684\u60c5\u51b5\uff0cSpark On K8S \u6a21\u5f0f\u4e0b\uff0c\u4efb\u52a1\u8dd1\u5b8c\u4e4b\u540e\uff0c\u4f1a\u6839\u636e app id \u53bb\u5220\u9664\u7528\u5b8c\u7684\u8d44\u6e90\u6587\u4ef6\uff0c \u5982\u679c\u4e24\u4e2a\u4efb\u52a1\u5171\u7528 app id\uff0c\u5c31\u4f1a\u51fa\u73b0\u4e00\u4e2a\u4efb\u52a1\u8dd1\u5b8c\u540e\uff0c\u7acb\u5373\u5220\u9664\u6240\u6709\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u5bfc\u81f4\u672a\u8dd1\u5b8c\u7684\u4efb\u52a1\uff0c\u4e00\u76f4\u62ff\u4e0d\u5230\u8d44\u6e90\u7684\u60c5\u51b5\u3002describe pod \u7684\u8bdd\uff0c\u4f1a\u51fa\u73b0 <code>Error: MountVolume.SetUp failed for volume \"spark-conf-volume-exec\"</code> \u60c5\u51b5\u3002</p> <p>\u89e3\u51b3\u65b9\u6848: - \u5c06 image \u5347\u7ea7\u5230 3.3 \u7248\u672c\uff08\u6bd4\u8f83\u56f0\u96be\uff0c\u9700\u8981\u505a\u5f88\u591a\u9a8c\u8bc1\u5de5\u4f5c\uff09 - \u5728 3.2 \u4e0a\u6253 patch, \u5c06 app_id \u7684\u683c\u5f0f\u66ff\u6362\u6210: <code>\"spark-app-\" + System.currentTimeMillis + \"-\" + UUID.randomUUID().toString()</code> - \u5728 dbt \u6d4b\u81ea\u5b9a\u4e49 app_id, spark.app.id = <code>\"spark-app-\" + System.currentTimeMillis + \"-\" + UUID.randomUUID().toString()</code></p> <p>\u76ee\u524d\u7684\u8fd9\u4e09\u4e2a\u65b9\u6848\u4e2d\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u7b2c\u4e09\u4e2a\uff0c\u6539\u8d77\u6765\u7b80\u5355\uff0c\u4e2a\u4eba\u66f4\u503e\u5411\u4e8e\u7b2c\u4e8c\u79cd\u65b9\u6848\uff0c\u6210\u672c\u4f4e\u4e14\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u80fd\u591f\u4e00\u52b3\u6c38\u9038</p>"},{"location":"blog/%E6%9D%82%E6%96%87/dbt-spark%20session%20%E8%B5%B7%E4%B8%8D%E6%9D%A5/","title":"Dbt spark session \u8d77\u4e0d\u6765","text":"<p>\u6211\u4eec\u4ece 2023 \u5e74\u5e74\u5e95\u5f15\u5165 DBT\uff0c2024 \u5e74\u5f00\u59cb\u5927\u89c4\u6a21\u8fc1\u5165\uff0c\u52302025-06 \u521d\uff0cDBT \u4efb\u52a1\u91cf\u8fbe\u5230 4000+\uff0c\u90fd\u5728\u4e00\u4e2a repo \u91cc</p> <p>\u6bcf\u6b21 Merge \u4e00\u4e2a MergeRequest \u7684\u65f6\u5019\uff0c\u6784\u5efa airflow \u7684 DAG\uff0c\u5728 airflow DAG \u4e2d\uff0c\u6bcf\u4e2a dbt task \u6267\u884c\u4e00\u4e2a dbt model\uff0c\u6267\u884c\u547d\u4ee4 <code>dbt run --select {model_name}</code> \u81ea 2025-06-09 \u5f00\u59cb\uff0c\u51fa\u73b0\u90e8\u4efd model \u51fa\u73b0 spark-session \u957f\u65f6\u95f4\u65e0\u6cd5\u542f\u52a8\u7684\u60c5\u51b5\uff0c\u76f4\u5230 airflow task timeout</p> <p>\u521d\u6b65\u6392\u67e5\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0 Spark Application ID \u91cd\u590d\u7684\u60c5\u51b5\uff0c\u6839\u636e Spark Application ID \u5f15\u53d1\u7684\u60e8\u6848 \u91cd\u65b0\u7ec4\u7ec7\u4e86\u4e00\u904d Spark Application ID, \u786e\u8ba4\u4e0d\u53ef\u80fd\u518d \u51fa\u73b0\u91cd\u590d\u7684\u60c5\u51b5\u540e\u4e0a\u7ebf \u7ed3\u679c\u7b2c\u4e8c\u5929\u8fd8\u662f\u51fa\u73b0\u4e86\u76f8\u540c\u7684\u95ee\u9898\uff0c\u53ea\u662f\u6982\u7387\u8bb8\u591a\u3002 \u628a\u65e5\u5fd7\u5207\u6362\u6210 info \u6a21\u5f0f\uff0c\u4e5f\u6ca1\u770b\u5230\u6253\u65e5\u5fd7\u7684\u60c5\u51b5\u3002</p> <p>\u6211\u4eec\u7684 Spark \u662f Spark on K8S perjob \u6a21\u5f0f\uff0c\u6bcf\u4e2a Job \u90fd\u662f on aliyun ECI, \u8dd1\u5b8c\u4e4b\u540e\uff0ceci instance \u5c31\u6e05\u7406\u7684\u3002</p> <p>\u6211\u4eec\u767d\u5929\u5c11\u91cf\u91cd\u8dd1\uff0c\u65e0\u6cd5\u590d\u73b0\uff0c\u4f46\u662f\u901a\u8fc7\u89c2\u5bdf ECI \u7684\u8d44\u6e90\u5229\u7528\u7387\uff0c\u53d1\u73b0\u5728 DBT \u7684 compile \u9636\u6bb5\uff0cpod \u7684CPU \u5229\u7528\u7387\u5df2\u7ecf\u8fbe\u5230 100%\uff0c\u521d\u6b65\u6392\u67e5\u5927\u6982\u7387\u662f compile \u9636\u6bb5 CPU \u6ca1\u6709\u53ca\u65f6\u91ca\u653e\uff0c\u5bfc\u81f4\u5728\u542f\u52a8 Spark Driver \u7684\u65f6\u5019\uff0c\u83b7\u53d6\u4e0d\u5230 CPU\uff0c\u6211\u4eec\u7ed9\u6bcf\u4e2a dbt task \u7684\u8d44\u6e90\u662f 1\u68384G\uff0c\u663e\u7136\u5982\u679c compile \u9636\u6bb5\u8d44\u6e90\u4e0d\u91ca\u653e\u7684\u8bdd\uff0c\u5c31\u4f1a\u51fa\u73b0 driver \u62ff\u4e0d\u5230\u8d44\u6e90\uff0c\u65e0\u6cd5\u542f\u52a8\u7684\u95ee\u9898</p> <p>2025-06-19 \u5f00\u59cb\u5c06 dbt submit pod \u7684\u89c4\u683c\u5347\u7ea7\u4e3a 2\u68388G \u4e4b\u540e\uff0ccompile \u7684 CPU \u8d44\u6e90\u5229\u7528\u7387\u964d\u4f4e\u5230\u4e86 70\uff0c\u622a\u6b62\u5230 2025-06-26\uff0c \u4e0d\u518d\u51fa\u73b0 Driver \u8d77\u4e0d\u6765\u7684\u60c5\u51b5\u3002</p> <p>\u603b\u7ed3\uff1adbt compile \u6709\u70b9\u5751\uff0c\u53ef\u80fd\u9700\u8981\u4f18\u5316\uff0c\u4e0d\u7136\u540e\u9762\u4efb\u52a1\u91cf\u8fc7\u591a\uff0c\u4f1a\u5bfc\u81f4 CPU\u5229\u7528\u7387\u98d9\u5347\uff0c\u6bcf\u6b21\u90fd\u8c03\u7528 <code>show table extended in {database} like '*'</code>, HMS \u625b\u4e0d\u4f4f dbt compile/run \u7684\u51b2\u51fb</p>"},{"location":"blog/%E6%9D%82%E6%96%87/lance_learm/","title":"lance \u5b66\u4e60\u7b14\u8bb0","text":"<p>lance \u6570\u636e\u96c6\u8fc7\u5927\uff0c\u53ef\u4ee5 lance.write_data \u4e5f\u662f\u652f\u6301 pyarrow.RecordBatch Iterator\uff0c\u53ea\u9700\u8981\u63d0\u4f9b pyarrow.schema \u5373\u53ef</p> <pre><code>import lance\nimport pyarrow as pa\nfrom collections.abc import Iterator\n\ndef producer()-&gt; Iterator[pa.RecordBatch]:\n    yield pa.RecordBatch.from_pylist([{\"column_1\": \"val_1_1\", \"column_2\": 1}])\n    yield pa.RecordBatch.from_pylist([{\"column_1\": \"val_2_1\", \"column_2\": 2}])\nschema = pa.schema([\n    (\"column_1\", pa.string()),\n    (\"column_2\", pa.int32()),\n])\n\nds = lance.write_dataset(producer(),\n                         \"./batch_column.lance\",\n                         schema=schema, mode=\"overwrite\")\nprint(ds.count_rows())  # Output: 2\n</code></pre> <p>lance.write_data() \u652f\u6301 <code>pyarrow.Table</code>,<code>pandas.DataFrame</code>,<code>pyarrow.dataset.DataSet</code> \u548c <code>Iterator[pyarrow.RecordBatch]</code> \u56db\u79cd\u7c7b\u578b\u7684\u6570\u636e</p>"},{"location":"blog/%E6%9D%82%E6%96%87/redis%E4%B8%8D%E9%87%8A%E6%94%BE%E5%AF%BC%E8%87%B4%E7%9A%84%E5%86%85%E5%AD%98%E5%8D%A0%E6%BB%A1/","title":"Redis\u4e0d\u91ca\u653e\u5bfc\u81f4\u7684\u5185\u5b58\u5360\u6ee1","text":"<p>\u6211\u4eec\u6709\u4e00\u90e8\u5206\u4e0a\u53e4\u65f6\u4ee3\u7684 flink \u4efb\u52a1\u662f\u7528\u4f20\u7edf\u7684 DataStream API \u5199\u7684\uff0c\u6700\u8fd1\u6709tx \u53bb\u4fee\u6539\u7684\u65f6\u5019\uff0c\u4f7f\u7528 JedisPool \u65f6\uff0c\u6ca1\u6709\u663e\u793a close\uff0c\u5bfc\u81f4\u5728 Redis \u8fde\u63a5\u4e0d\u91ca\u653e\uff0c\u4ee3\u7801\u5982\u4e0b:</p> <pre><code>DataStream&lt;VehcileLatestState&gt; dataStream =\n          tableEnv\n              .toDataStream(source_table)\n              .flatMap(\n                  new RichFlatMapFunction&lt;Row, VehcileLatestState&gt;() {\n                      ObjectMapper objectMapper = new ObjectMapper();\n                      JedisPool jedisPool = null;\n\n                      @Override\n                      public void open(Configuration parameters) throws Exception {\n                          jedisPool =\n                              new JedisPool(\n                                  new GenericObjectPoolConfig&lt;Jedis&gt;(),\n                                  \"r-xx.redis.rds.xxx.com\",\n                                  6379,\n                                  2000,\n                                  \"zzzz==\");\n                      }\n\n                      @Override\n                      public void flatMap(Row row, Collector&lt;VehcileLatestState&gt; collector)\n                          throws Exception {\n                          long partitionId = 0;\n                          long kafkaOffset = 0;\n                          String kafkaTimestamp = \"1970-01-01 00:00:00\";\n                          xxxx\n                          heartbeat.setHeartbeat_v2(1);\n                          try (Jedis jedis = jedisPool.getResource()) {\n                              String lastTimeKey = String.format(\"%s_%s\", heartbeat.getVehicle_vin(), Constants.VEHICLE_LATEST_TIME_KEY_TAIL);\n                              String latestTimestamp = jedis.get(lastTimeKey);\n                              if (null != latestTimestamp\n                                  &amp;&amp; Long.parseLong(latestTimestamp) &gt;= heartbeat.getCurrent_timestamp_seconds()) {\n                                  heartbeat.setOut_order(1);\n                              } else {\n                                  heartbeat.setOut_order(0);\n                                  if (!heartbeat.isDirty() || (null == heartbeat.getDirty_reason() || !heartbeat.getDirty_reason().equals(Constants.PARSE_EXCEPTION))) {\n                                      String key = String.format(\"%s_%s\", heartbeat.getVehicle_vin(), Constants.VEHICLE_LATEST_STATE_KEY_TAIL);\n                                      jedis.setex(key, 7 * 24 * 60 * 60, objectMapper.writeValueAsString(heartbeat));\n                                  }\n                                  jedis.setex(lastTimeKey, 48 * 60 * 60, heartbeat.getCurrent_timestamp_seconds() + \"\");\n                              }\n                          }\n                          collector.collect(heartbeat);\n                      }\n                  });\n</code></pre> <p>\u4ee3\u7801\u4e2d Jedis \u662f\u91ca\u653e\u4e86\uff0c\u4f46\u662f JedisPool \u6ca1\u6709\u91ca\u653e\uff0c\u5bfc\u81f4redis \u8fde\u63a5\u4e0d\u91ca\u653e\u3002</p>"}]}